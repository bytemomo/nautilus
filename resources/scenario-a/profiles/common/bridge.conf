# Mosquitto Bridge Configuration for Scenario A
# 
# This bridge connects the DMZ broker to an enterprise network,
# simulating the L-1 lateral movement threat scenario.
#
# WARNING: This is an intentionally insecure configuration for testing.

# =============================================================================
# General Settings
# =============================================================================
persistence false
log_dest stdout
log_type all

# =============================================================================
# Local Listener (for IT network clients)
# =============================================================================
listener 1883
protocol mqtt
allow_anonymous true

# =============================================================================
# Bridge Connection to DMZ Broker
# =============================================================================
connection dmz-bridge
address mqtt-broker:8883
topic ot/# in 0
topic system/# in 0

# Bridge credentials (using weak credentials for testing)
remote_username guest
remote_password guest

# TLS settings for bridge connection
bridge_cafile /mosquitto/certs/ca.crt
bridge_insecure true

# Bridge behavior
cleansession true
notifications true
notification_topic bridge/status
try_private true
start_type automatic
restart_timeout 10
